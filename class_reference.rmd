---
title: "Class Reference"
author: "Emmett Gartner"
output:
  html_document:
    theme: cerulean
    highlight: pygments
    toc: true
    toc_float:
      collapsed: true
      smooth_scroll: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introduction

Consider this a personal guide to the commands and functions you will learn. In general, when you come across an R command or function that you want to remember, put it in here along with a description of what it does and when you'd use it.

Groups loan dataframe by county of loan; then counts total # of loans
```{r}
ppp_maryland_loans %>%
  group_by(project_county_name) %>%
  summarise(
    count_loans = n()
  )
```


To get a quick look at the top 6 rows of a data set:glimpse(wv_ppp_loans)

To store data table in righthand viewer: wv_summary<-wv_ppp_loans %>% 

When testing new code chunks, red lettering may arise as a warning — not an error. If that is the case, when you run it again, the red lettering will not appear.

mutate(new_column = value/calculation that goes into that column) In this case, we are creating a new column that takes % of loan that goes towards payroll. Can also use to update existing columns.

To turn a percentage to the 100s; percent_payroll = (payroll_proceed/amount)*100.


If else; categorizes as one thing or the other and creates new column to indicate. Code:

 in_out = if_else(
        servicing_lender_state == 'MD', "IN", "OUT"
        
Double equal signs (==) tests for equivalency.

The following code summarizes the total number of banks in and out of Maryland.
maryland_with_in_out %>% group_by(in_out)%>%summarize(count=n())

The following code tallies up how many data points fall in each month of the year and organizes them from most points to least:

maryland_ppp %>%
  mutate(Month = floor_date(date_approved, "month")) %>%
  group_by(Month) %>%
  summarise(total = n()) %>%
  arrange(desc(total))

= -> assignment; == -> assessment. I.e. filter (amount==1000) sets criteria for searching amounts that much 1000. To determine less/greater than; filter (amount<=1000) filter(amount>=1000)

If we want to make all of our cities uppercase:

maryland_ppp <- maryland_ppp %>% mutate(project_city = str_to_upper(project_city))

> md_counties<-maryland_ppp %>% group_by(project_county_name) %>% summarize(count=n())

Best way to deal with dates? Treat them as dates!! 

 # ---> maryland_ppp_sample <- read.csv('data/ppp_maryland.csv)
  Not great, interprets them as characters, not date.
  
Specifically command R to understand that column is date.

 ---> lubridate_maryland_ppp <-- maryland_ppp_sample %>% mutate(Clean Date = ymd_hms(date_approved)) 
      glimpse(lubridate_maryland_ppp); sets in Hour Minute Second, doesn't work.
      
      maryland_ppp_sample <- read_csv('data/ppp_maryland.csv')
      glimpse(maryland_ppp_sample) will get you what you need!
      
Why it's useful to treat dates as dates:

floor_date = helps count variables by month; rounds down value to first day of each month — group_by then racks up the datapoints created by the floor_date command.

To only work with data from a specific year; filter(date_approved>2020-12-31) 

select(name, amount, date_approved) to be only shown set variables.


guess_max=10 guesses the column type best on the first 10 rows of data in the file. I.e. if something looks like a number, date, or character column, they're labeled accordingly.

The lower the number, the higher the risk of inaccuracy. 

NA = no value here.

####THIS CODE ASSURES THAT R CLASSIFIES A VARIABLE IN THE FIELD YOU LIST#####
ppp_maryland_loans <- ppp_maryland_loans %>%
  mutate(id = as.character(id))

glimpse(ppp_maryland_loans)

Overwrites old code.

This code is dope; can't explain why. Groups reoccurring franchise names and aggregates data. Check it:

ppp_maryland_loans %>%
  group_by(franchise_name) %>%
  summarise(
    count=n()
  ) %>%
  arrange(desc(count))
```


  filter(is.na(forgiveness_date))

Check to see that if the following column is NA.

ppp_maryland_loans %>%
  mutate(month_year_approved = floor_date(date_approved, "month")) %>%
  group_by(month_year_approved) %>%
   summarise(
    count=n()
  ) %>%
  arrange(month_year_approved)
  
  
  Similar to last floor_date code; sets all month values to the 1st and counts totals.